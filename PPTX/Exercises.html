<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by LibreOffice - see http://cgit.freedesktop.org/libreoffice/core/tree/filter/source/xslt for the code.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xml:lang="en-GB">- no title specified</title><meta name="DCTERMS.title" content="" xml:lang="en-GB"/><meta name="DCTERMS.language" content="en-GB" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.creator" content="User"/><meta name="DCTERMS.issued" content="2017-04-19T10:33:00" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.modified" content="2017-05-08T09:39:16.106956952" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.provenance" content="" xml:lang="en-GB"/><meta name="DCTERMS.subject" content="," xml:lang="en-GB"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style type="text/css">
	@page {  }
	table { border-collapse:collapse; border-spacing:0; empty-cells:show }
	td, th { vertical-align:top; font-size:12pt;}
	h1, h2, h3, h4, h5, h6 { clear:both }
	ol, ul { margin:0; padding:0;}
	li { list-style: none; margin:0; padding:0;}
	<!-- "li span.odfLiEnd" - IE 7 issue-->
	li span. { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
	span.footnodeNumber { padding-right:1em; }
	span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
	* { margin:0;}
	.Heading_20_1 { color:#2e74b5; font-size:16pt; line-height:108%; margin-bottom:0cm; margin-top:0.423cm; text-align:left ! important; font-family:Calibri Light; writing-mode:lr-tb; }
	.Heading_20_2 { color:#00000a; font-size:14pt; line-height:108%; margin-bottom:0.212cm; margin-top:0.423cm; text-align:left ! important; font-family:Liberation Sans; writing-mode:lr-tb; }
	.P1 { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P10 { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P11 { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P12 { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P13_borderStart { color:#00000a; font-size:11pt; line-height:108%; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; background-color:transparent; padding-bottom:0.282cm;  border-bottom-style:none; }
	.P13 { color:#00000a; font-size:11pt; line-height:108%; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; background-color:transparent; padding-bottom:0.282cm; padding-top:0cm;  border-top-style:none; border-bottom-style:none; }
	.P13_borderEnd { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; background-color:transparent; padding-top:0cm;  border-top-style:none;}
	.P14_borderStart { color:#00000a; font-size:11pt; line-height:108%; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; background-color:transparent; padding-bottom:0.282cm;  border-bottom-style:none; }
	.P14 { color:#00000a; font-size:11pt; line-height:108%; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; background-color:transparent; padding-bottom:0.282cm; padding-top:0cm;  border-top-style:none; border-bottom-style:none; }
	.P14_borderEnd { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; background-color:transparent; padding-top:0cm;  border-top-style:none;}
	.P15 { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0cm; margin-top:0.423cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P16 { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0cm; margin-top:0.423cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P17_borderStart { color:#00000a; font-size:11pt; line-height:108%; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:-0.4cm; margin-right:0cm; text-indent:0cm; background-color:transparent; padding-bottom:0.282cm;  border-bottom-style:none; }
	.P17 { color:#00000a; font-size:11pt; line-height:108%; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:-0.4cm; margin-right:0cm; text-indent:0cm; background-color:transparent; padding-bottom:0.282cm; padding-top:0cm;  border-top-style:none; border-bottom-style:none; }
	.P17_borderEnd { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:-0.4cm; margin-right:0cm; text-indent:0cm; background-color:transparent; padding-top:0cm;  border-top-style:none;}
	.P18_borderStart { color:#00000a; font-size:11pt; line-height:108%; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:-0.4cm; margin-right:0cm; text-indent:0cm; background-color:transparent; padding-bottom:0.282cm;  border-bottom-style:none; }
	.P18 { color:#00000a; font-size:11pt; line-height:108%; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:-0.4cm; margin-right:0cm; text-indent:0cm; background-color:transparent; padding-bottom:0.282cm; padding-top:0cm;  border-top-style:none; border-bottom-style:none; }
	.P18_borderEnd { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:-0.4cm; margin-right:0cm; text-indent:0cm; background-color:transparent; padding-top:0cm;  border-top-style:none;}
	.P19_borderStart { color:#00000a; font-size:11pt; line-height:108%; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:-0.4cm; margin-right:0cm; text-indent:0cm; background-color:transparent; padding-bottom:0.282cm;  border-bottom-style:none; }
	.P19 { color:#00000a; font-size:11pt; line-height:108%; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:-0.4cm; margin-right:0cm; text-indent:0cm; background-color:transparent; padding-bottom:0.282cm; padding-top:0cm;  border-top-style:none; border-bottom-style:none; }
	.P19_borderEnd { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:-0.4cm; margin-right:0cm; text-indent:0cm; background-color:transparent; padding-top:0cm;  border-top-style:none;}
	.P2 { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0cm; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P3_borderStart { color:#333333; font-size:13.5pt; line-height:108%; margin-top:0cm; text-align:left ! important; font-family:Consolas, Liberation Mono, Courier, monospace; writing-mode:lr-tb; letter-spacing:normal; font-style:normal; font-weight:normal; background-color:#ffffff; padding-bottom:0cm;  border-bottom-style:none; }
	.P3 { color:#333333; font-size:13.5pt; line-height:108%; text-align:left ! important; font-family:Consolas, Liberation Mono, Courier, monospace; writing-mode:lr-tb; letter-spacing:normal; font-style:normal; font-weight:normal; background-color:#ffffff; padding-bottom:0cm; padding-top:0cm;  border-top-style:none; border-bottom-style:none; }
	.P3_borderEnd { color:#333333; font-size:13.5pt; line-height:108%; margin-bottom:0cm; text-align:left ! important; font-family:Consolas, Liberation Mono, Courier, monospace; writing-mode:lr-tb; letter-spacing:normal; font-style:normal; font-weight:normal; background-color:#ffffff; padding-top:0cm;  border-top-style:none;}
	.P4_borderStart { color:#00000a; font-size:11pt; line-height:108%; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; padding:0cm; border-style:none; padding-bottom:0cm;  border-bottom-style:none; }
	.P4 { color:#00000a; font-size:11pt; line-height:108%; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; padding:0cm; border-style:none; padding-bottom:0cm; padding-top:0cm;  border-top-style:none; border-bottom-style:none; }
	.P4_borderEnd { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; padding:0cm; border-style:none; padding-top:0cm;  border-top-style:none;}
	.P5 { color:#2e74b5; font-size:16pt; line-height:108%; margin-bottom:0cm; margin-top:0.423cm; text-align:left ! important; font-family:Calibri Light; writing-mode:lr-tb; }
	.P6 { color:#2e74b5; font-size:16pt; line-height:108%; margin-bottom:0cm; margin-top:0.423cm; text-align:left ! important; font-family:Calibri Light; writing-mode:lr-tb; }
	.P7 { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P8 { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P9 { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.Preformatted_20_Text { color:#00000a; font-size:11pt; line-height:108%; margin-bottom:0.282cm; margin-top:0cm; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.Standard { font-size:11pt; font-family:Calibri; writing-mode:lr-tb; margin-top:0cm; margin-bottom:0.282cm; line-height:108%; text-align:left ! important; color:#00000a; }
	.Source_20_Text { font-family:Liberation Mono; }
	.T2 { color:#333333; font-family:Consolas, Liberation Mono, Courier, monospace; font-size:13.5pt; letter-spacing:normal; font-style:normal; font-weight:normal; background-color:#ffffff; }
	.T3 { color:#333333; font-family:Consolas, Liberation Mono, Courier, monospace; font-size:13.5pt; letter-spacing:normal; font-style:normal; font-weight:normal; background-color:#ffffff; }
	.T4 { color:#333333; font-family:Consolas, Liberation Mono, Courier, monospace; font-size:13.6999998092651pt; letter-spacing:normal; font-style:normal; font-weight:normal; background-color:#f8f8f8; }
	.T5 { color:#333333; letter-spacing:normal; background-color:#f8f8f8; }
	<!-- ODF styles with no properties representable as CSS -->
	.Numbering_20_Symbols .T1 .T6 .T7  { }
	</style></head><body dir="ltr" style="max-width:21.59cm;margin-top:2.54cm; margin-bottom:2.54cm; margin-left:2.54cm; margin-right:2.54cm; "><h1 class="P6"><a id="a__Membership_Application"><span/></a><span class="T1">Membership Application</span></h1><p class="P15"><span class="T1">Application manages member details and the products to which they subscribe</span></p><p class="P15"><span class="T1">Provides the following User Interfaces (UIs)</span></p><p class="P15"><span class="T1">1) Self-registration / detail editing for members</span></p><p class="P15"><span class="T1">2) End user facility to add / delete subscriptions</span></p><p class="P15"><span class="T1">3) Admin to allow the management of subscription products</span></p><p class="P16"><span class="T1">4) Payment UI</span></p><p class="P15"><span class="T1">Provides API’s </span></p><p class="P15"><span class="T1">1) Query if a particular member has a subscription</span></p><p class="P15"><span class="T1">2) List all members holding a subscription</span></p><p class="P15"><span class="T1">3) List all members</span></p><p class="P15"><span class="T1">4) List details for a member</span></p><p class="P16"><span class="T1">Has a time or event driven component which notifies users if subscriptions are due to expire</span></p><h1 class="Heading_20_1"><a id="a__Identifying_Microservices"><span/></a>Identifying Microservices</h1><p class="P10">Using the application description *** as a starting point, define an initial (candidate) set of services for the application.</p><ol><li><p class="P11" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">1.</span>Define a domain – we’ve done that for you with the description. <span class="odfLiEnd"/> </p></li><li><p class="P11" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">2.</span>Examine the description and play “spot the noun” this should yield a list of all possible services<span class="odfLiEnd"/> </p></li><li><p class="P11" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">3.</span>Refine the list. You should consider:<span class="odfLiEnd"/> </p><ol><li><p class="P11" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">1.</span>Does each service map onto a real world concept?<span class="odfLiEnd"/> </p></li><li><p class="P11" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">2.</span>Is it likely that creating a service will provide a benefit to the system (in terms of flexibility or scalability)?<span class="odfLiEnd"/> </p></li></ol></li><li><p class="P11" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">4.</span>For each of the user / system interactions outlined in the description, consider if the services provide the capabilities needed.<span class="odfLiEnd"/> </p><ol><li><p class="P11" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">1.</span>Add any extra services identified to our system<span class="odfLiEnd"/> </p></li></ol></li></ol><p class="P10"> </p><h1 class="Heading_20_1"><a id="a__Identifying_Service_Interfaces"><span/></a>Identifying Service Interfaces</h1><p class="Standard"> </p><p class="P10">In our version of the solution to the previous exercise, we have identified a member service. <span class="T7">Examining the service, we have identified these use-case titles for the service</span></p><p class="P10"> </p><p class="P10">Add new member</p><p class="P10">Update member details</p><p class="P10">List members</p><p class="P10">Get details of member</p><p class="P17"><span> Archive member</span></p><p class="P18_borderEnd"/><ol><li><p class="P13" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">1.</span>Examine the list of use-cases and decide<span class="odfLiEnd"/> </p><ol><li><p class="P13" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">1.</span>What operations the service should support<span class="odfLiEnd"/> </p></li><li><p class="P13" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">2.</span>What the request and response messages for those services should look like<span class="odfLiEnd"/> </p></li></ol></li></ol><p class="P14"/><p class="Heading_20_2">Bonus</p><p class="P19">Other parts of the system need to know that member details have been modified. Consider the operations you would need to support some form of publish / subscribe interface to support this notification.</p><h1 class="P5"><a id="a__Docker_Ex_1"><span/></a><span class="T1">Docker Ex 1</span></h1><p class="P7"> </p><p class="Standard"><span class="T1">Start a Docker machine from an image</span></p><p class="Standard"><span class="T1">Connect to it.</span></p><p class="Standard"><span class="T1">Start stop / explore</span></p><p class="Standard"><span class="T1">Then use Portainer:dmjrw</span></p><p class="P7"> </p><p class="Standard">sudo docker run -d -p 9000:9000 </p><p class="Standard"> -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer</p><p class="P7"> </p><h1 class="Heading_20_1"><a id="a__Docker_Ex_2"><span/></a>Docker Ex 2</h1><p class="Standard"><span class="T1">Create an empty directory</span></p><p class="Standard"><span class="T1">Create a dockerfile</span></p><p class="Preformatted_20_Text"><span class="Source_20_Text"><span class="T2">FROM httpd:2.4</span></span></p><p class="P2"><span class="Source_20_Text"><span class="T3">COPY ./public-html/ /usr/local/apache2/htdocs/</span></span></p><p class="P3"><span class="Source_20_Text"/></p><p class="P2"><span class="Source_20_Text"><span class="T3">Add a /public-html dir to the image with an index.html file</span></span></p><p class="P3"><span class="Source_20_Text"/></p><p class="P2"><span class="Source_20_Text"><span class="T3">Run the image – map port to 80:80</span></span></p><p class="P3"><span class="Source_20_Text"/></p><p class="P2">docker exec -it sad_franklin /bin/bash</p><p class="P2"> </p><p class="P2">Explore</p><p class="P2"> </p><p class="P7"> </p><h1 class="Heading_20_1"><a id="a__Swagger"><span/></a>Swagger</h1><p class="Standard"> </p><p class="Standard">Create a service interface</p><p class="Standard">swagger.io</p><p class="Standard">Select tools / editor – online editor</p><p class="Standard">Create a swagger specification for a Member service</p><p class="Standard">Use the heoroku pet store as a template</p><p class="Standard">Methods</p><p class="Standard">get given and id returns an object representing a member</p><p class="Standard"><span> name</span></p><p class="Standard"><span> address</span></p><p class="Standard"><span> email</span></p><p class="Standard"> </p><p class="Standard">post adds a new member</p><p class="Standard"> </p><p class="Standard">put updates a member</p><p class="Standard"> </p><p class="Standard">delete deletes a member</p><p class="Standard"> </p><p class="Standard"> </p><h1 class="Heading_20_1"><a id="a__Mongo_DB"><span/></a>Mongo DB</h1><p class="Standard"> </p><p class="Standard"> </p><p class="Standard">docker run --name some-more-mongo -v /home/mjrw/Documents/BBC-Microservices/Resources:/mydata -d mongo</p><p class="Standard"> </p><p class="Standard">docker exec -it some-more-mongo bash</p><p class="Standard">use testdb</p><p class="Standard">foo = { name :"foo", location: { x: 3, y: 5 } }</p><p class="Standard">bar = { name : "bar", location: { x: 1, y: 2, z: 4 } }</p><p class="Standard">zep = { name : "zep", location: { x: -1, z: 4 } }</p><p class="Standard"> </p><p class="Standard">db.testdata.insert( foo )</p><p class="P9">db.testdata.insert( bar )<span class="T6">ul if eate</span></p><p class="Standard">db.testdata.insert( zep )</p><p class="Standard"> </p><p class="Standard">db.testdata.find()</p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard">mongoimport --db dbsubs --collection subs --type csv --headerline --file /mydata/subscriptions.csv</p><p class="Standard">db.subs.find({"Member_Name" : /Michael.*/});</p><p class="Standard"> </p><p class="Standard">Do some sample queries (see 4500)</p><p class="Standard"> </p><p class="Standard">Give them a query to figure out</p><p class="Standard"> </p><p class="Standard">*** Integrate with Node?</p><p class="Standard"> </p><h1 class="Heading_20_1"><a id="a__CASSANDRA"><span/></a>CASSANDRA</h1><p class="Standard"> </p><p class="Preformatted_20_Text"><a id="__DdeLink__27_1674420362"/><span class="Source_20_Text"><span class="T3">docker run --name some-cassandra -v /home/mjrw/Documents/BBC-Microservices/Resources:/mydata </span></span><span class="Source_20_Text"><span class="T3">-d cassandra</span></span></p><p class="Standard">docker exec -it some-cassandra bash</p><p class="Standard">cqlsh</p><p class="Standard">(May have to wait for this to work and then retry)</p><p class="Standard">CREATE KEYSPACE subscriptions WITH REPLICATION = { 'class' :</p><p class="Standard">'NetworkTopologyStrategy', 'datacenter1' : 2 };</p><p class="Standard"> </p><p class="Standard">(Network replicated)</p><p class="Standard">use subscriptions;</p><p class="Standard">CREATE TABLE subscriptions ( id varchar, name varchar, member_id varchar, type varchar, renew boolean, startdate timestamp, enddate timestamp, PRIMARY KEY(id));</p><p class="Standard"> </p><p class="Standard">COPY crimedata (id , name , member_id , type , renew , startdate , enddate )</p><p class="Standard">FROM '/mydata/subscriptions.csv;</p><p class="Standard"> </p><p class="P8">Neo4J</p><p class="P8"> </p><p class="P1"><span class="Source_20_Text"><span class="T4">docker run \</span></span></p><p class="P4_borderStart"><span class="Source_20_Text"><span class="T5">    </span></span><span class="Source_20_Text"><span class="T4">--publish=7474:7474 --publish=7687:7687 \</span></span></p><p class="P4"><span class="Source_20_Text"><span class="T5">    </span></span><span class="Source_20_Text"><span class="T4">--volume=$HOME/neo4j/data:/data \</span></span></p><p class="P4_borderEnd"><span class="Source_20_Text"><span class="T5">    </span></span><span class="Source_20_Text"><span class="T4">neo4j</span></span></p><p class="P8"> </p><p class="P8"> </p><p class="P8">Connect to 7474:7474</p><p class="P8">Run the code sample</p><p class="P8"/><p class="Standard"> </p><p class="Standard"><span class="T1">Docker Swarm</span></p><p class="P7"> </p><p class="Standard"><span class="T1">Connect Swarm to AWS</span></p><p class="Standard"><span class="T1">(Use pre-created AWS role).</span></p><p class="Standard"><span class="T1">Create Swarm – show resources being created</span></p><p class="Standard"><span class="T1">Connect to the swarm</span></p><p class="Standard"><span class="T1">Deploy the Composition onto the Swarm</span></p><p class="Standard"><a id="_GoBack"/><span class="T1">** Connect to a node and see what’s started?</span></p><p class="P12">db.testdata.find()</p></body></html>